<!DOCTYPE html>
<html lang="en">
<html>

<head>
  <meta charset="UTF-8">
  <link href="/.static/css/primer.css" rel="stylesheet" />
  <link rel="stylesheet alternate" href="/.static/css/github-light.css" id="light-hl">
  <link rel="stylesheet alternate" href="/.static/css/github-dark.css" id="dark-hl">

  <title>Ajax-基础语法.md</title>
</head>

<body id="markdown-body" data-color-mode="light" data-dark-theme="light">
  <div class="
        Box
        md
        js-code-block-container
        Box--responsive
        container-xl
        px-3 px-md-4 px-lg-5
        mt-5
      " id="content">
    <div class="Box-body px-5 pb-5">
      <div class="d-flex flex-column flex-sm-row-reverse">
        <div>
          <button id="theme-button" class="btn" type="button">
            <span id="theme-icon" class="iconify" data-icon="octicon:sun-16"></span>
          </button>
        </div>
      </div>
      <article class="markdown-body entry-content container-lg" itemprop="text">
        <h3><a id="user-content-1-ajax" class="anchor" aria-hidden="true" href="#1-ajax"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. Ajax</h3>
<blockquote>
<p>ajax可以实现局部刷新，也叫做无刷新，无刷新指的是整个页面不刷新，只是局部刷新，ajax可以自己发送http请求，不用通过浏览器的地址栏，所以页面整体不会刷新，ajax获取到后台数据，更新页面显示数据的部分，就做到了页面局部刷新。</p>
</blockquote>
<ul>
<li>
<p>常用参数</p>
<div class="highlight highlight-text-html-basic"><pre>$.ajax使用方法
常用参数：
1、url 请求地址
2、type 请求方式，默认是'GET'，常用的还有'POST'
3、dataType 设置返回的数据格式，常用的是'json'格式，也可以设置为'html'
4、data 设置发送给服务器的数据
5、success 设置请求成功后的回调函数
6、error 设置请求失败后的回调函数
7、async 设置是否异步，默认值是'true'，表示异步</pre></div>
<div class="highlight highlight-text-html-basic"><pre>// 常用写法
$.ajax({
    url: 'js/data.json',
    type: 'GET',
    dataType: 'json',
    data:{'aa':1}
})
.done(function(data) {
    alert(data.name);
})
.fail(function() {
    alert('服务器超时，请重试！');
});

// data.json里面的数据： {"name":"tom","age":18}</pre></div>
</li>
<li>
<p>同源策略（可以使用jsonp解决）</p>
</li>
<li>
<p>ajax请求的页面或资源只能是同一个域下面的资源，不能是其他域的资源，这是在设计ajax时基于安全的考虑。特征报错提示：</p>
</li>
</ul>
<blockquote>
<p>XMLHttpRequest cannot load <a href="https://www.baidu.com/" rel="nofollow">https://www.baidu.com/</a>. No<br>
'Access-Control-Allow-Origin' header is present on the requested resource.<br>
Origin 'null' is therefore not allowed access.</p>
</blockquote>
<h3><a id="user-content-2-jsonp" class="anchor" aria-hidden="true" href="#2-jsonp"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. jsonp</h3>
<ul>
<li>ajax只能请求同一个域下的数据或资源，有时候需要跨域请求数据，就需要用到jsonp技术，jsonp可以跨域请求数据，它的原理主要是利用了&lt;script&gt;标签可以跨域链接资源的特性。jsonp和ajax原理完全不一样，不过jquery将它们封装成同一个函数。</li>
</ul>
<div class="highlight highlight-text-html-basic"><pre>$.ajax({
    url:'js/data.js',
    type:'get',
    dataType:'jsonp',
    jsonpCallback:'fnBack'
})
.done(function(data){
    alert(data.name);
})
.fail(function() {
    alert('服务器超时，请重试！');
});
// data.js里面的数据： fnBack({"name":"tom","age":18});</pre></div>

      </article>
    </div>
  </div>
  <script src="/.static/js/theme.js"></script>
  <script src="/.static/js/iconify.min.js"></script>
</body>

</html>